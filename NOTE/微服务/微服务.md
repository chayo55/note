## 微服务思想
核心:
1. **分布式思想(拆)** 
2. **自动化(HA,自动化)**
**SOA(Service-Oriented Architechture)思想**(微服务代理编辑的标准)
面向服务的架构（SOA）是一个组件模型，**它将应用程序的不同功能单元（称为服务）进行拆分，并通过这些服务之间定义良好的接口和协议联系起来。**接口是采用中立的方式进行定义的，它应该独立于实现服务的硬件平台、操作系统和编程语言。这使得构建在各种各样的系统中的服务可以以一种统一和通用的方式进行交互

**为什么使用微服务？**
**传统项目问题**
1. 如果采用nginx方式 实现负载均衡,当服务数量改变时,都必须手动的修改nginx.conf配置文件.不够智能.
2. 所有的请求都会通过nginx服务器作为中转.如果nginx服务器一旦宕机,则直接影响整个系统.nginx最好只做简单的反向代理即可
传统的方式 不够智能
- *传统项目的服务调用方式*
![[传统项目服务调用方式.png]]
- *微服务的调用方式*
![[微服务的调用方式.png]]

**消费者**调用**服务者**提供的服务的步骤：
1. **服务者**启动时连接**[[微服务#注册中心|注册中心]]**，将服务信息写入到**注册中心**(1.提供的服务，2.地址，3.端口)
2. **注册中心**收到服务信息，会动态维护服务列表
3. **消费者**启动后，会从**注册中心**同步服务信息到本地
4. **消费者**调用服务时，会按**[[Dubbo#Dubbo的负载均衡策略|负载均衡策略]]**调用相应服务
5. 当有**服务者**宕机，**注册中心**和**服务者**有心跳检测机制，会动态维护服务列表。
6. **注册中心**的服务列表发生变化时，会广播通知所有**消费者**更新服务信息。


## 注册中心
服务注册中心本质上是为了解耦服务提供者和服务消费者。对于任何一个微服务，原则上都应存在或者支持多个提供者.
**CAP理论**
CAP理论是分布式架构中重要理论
- 一致性(Consistency) (所有节点在同一时间具有相同的数据)
- 可用性(Availability) (保证每个请求不管成功或者失败都有响应)
- 分隔容忍(Partition tolerance) (系统中任意信息的丢失或失败不会影响系统的继续运作)

### Zookeeper
ZooKeeper是一个分布式的，开放源码的分布式应用程序协调服务，是Google的Chubby一个开源的实现，是Hadoop和Hbase的重要组件。它是一个为分布式应用提供一致性服务的软件，**提供的功能包括：配置维护、域名服务、分布式同步、组服务等**。
Zookeeper**主要的任务是服务的调度,提供一致性的功能**
- **Zookeeper集群**
集群规则：配置节点数N，存活节点x，N / x > 2时，集群可以创建。
选举规则：myid数值越大，越容易当选。

### eureka


## MQ(Message Queue)
**服务解耦**、**削峰**、**异步**
### RabbitMQ
![[消息队列]]
### ActiveMQ

### RocketMQ
### TubeMQ

## RPC(Remote Procedure Call)远程调用
## Dubbo
![[Dubbo]]